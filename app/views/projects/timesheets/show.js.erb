var $content = $('.selected-timesheet');
<% if policy(@timesheet).update? %>
  $content.html('<%= j render 'form', timesheet: Timesheet::Form.new(@timesheet) %>').attr('data-id', '<%= @timesheet.id %>');;
<% else %>
  $content.html('<%= j render 'show', timesheet: decorate(@timesheet) %>').attr('data-id', '<%= @timesheet.id %>');
<% end %>
$('.timesheets .timesheet.selected').removeClass('selected');
$('.timesheets .timesheet[data-id=<%= @timesheet.id %>]')
  .addClass('selected')
<% if @timesheet.submitted? %>
  .removeClass('pending').addClass('submitted')
  .find('.btn').text('Pending').addClass('disabled').attr('href', '#');
<% else %>
  ;
<% end %>
$(document).trigger('newContent', $content);
