$application = $('.job-application[data-application-id=<%= @job_application.id %>]')
  .attr('data-visibility', '<%= @job_application.visibility %>');
$parent = $application.parents('.job-applications');
switch ($parent.attr('id')) {
  case 'applications-applied':
  case 'applications-hidden':
    $newParent = $('#applications-shortlisted');
    break;
  default:
    $newParent = $('#applications-applied')
}

$newParent
  .prepend($application)
  .find('.no-applicants').addClass('hidden');

if ($parent.find('.job-application').length == 0) {
  $parent.find('.no-applicants').removeClass('hidden');
}
